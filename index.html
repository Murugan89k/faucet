<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Faucet by openflowsdn</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Faucet</h1>
      <h2 class="project-tagline"></h2>
      <a href="https://github.com/openflowsdn/faucet" class="btn">View on GitHub</a>
      <a href="https://github.com/openflowsdn/faucet/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/openflowsdn/faucet/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <p>:version: 0.27a
<img class="emoji" title=":copyright:" alt=":copyright:" src="https://assets-cdn.github.com/images/icons/emoji/unicode/00a9.png" height="20" width="20" align="absmiddle"> 2015 <code>REANNZ &lt;http://www.reannz.co.nz/&gt;</code>_.  All Rights Reserved.</p>

<p>.. meta::
   :keywords: Openflow, Ryu, Faucet, VLAN, SDN</p>

<h1></h1>

<h1>
<a id="faucet" class="anchor" href="#faucet" aria-hidden="true"><span class="octicon octicon-link"></span></a>Faucet</h1>

<p>Faucet is an Openflow controller for a layer 2 switch based on OpenvApour's Valve. It handles MAC learning and supports VLANs.  It is developed as an application for the <code>Ryu Open Flow Controller &lt;http://osrg.github.io/ryu/&gt;</code>_
.</p>

<p>It supports:</p>

<ul>
<li>OpenFlow v1.3</li>
<li>Multiple datapaths</li>
<li>Mixed tagged/untagged ports</li>
<li>Port statistics</li>
<li>Coexisting with other OpenFlow controllers</li>
</ul>

<h1></h1>

<h1>
<a id="configuration" class="anchor" href="#configuration" aria-hidden="true"><span class="octicon octicon-link"></span></a>Configuration</h1>

<p>Faucet is configured with a YAML-based configuration file. A sample configuration file is supplied in <code>faucet.yaml</code>.</p>

<p>The datapath ID may be specified as an integer or hex string (beginning with 0x).</p>

<p>A port not explicitly defined in the YAML configuration file will be set down and will drop all packets.</p>

<h1></h1>

<h1>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h1>

<p>You have run this as <code>root</code> or use <code>sudo</code></p>

<p><code># pip install https://pypi.python.org/packages/source/r/ryu-faucet/ryu-faucet-0.27a.tar.gz</code></p>

<p><code># pip show ryu-faucet</code></p>

<h2>
<a id="uninstall" class="anchor" href="#uninstall" aria-hidden="true"><span class="octicon octicon-link"></span></a>Uninstall</h2>

<p>To Uninstall the package</p>

<p><code># pip uninstall ryu-faucet</code></p>

<h1></h1>

<h1>
<a id="deployment" class="anchor" href="#deployment" aria-hidden="true"><span class="octicon octicon-link"></span></a>Deployment</h1>

<p>.. image:: src/docs/faucet_deployment.png</p>

<h1></h1>

<h1>
<a id="running" class="anchor" href="#running" aria-hidden="true"><span class="octicon octicon-link"></span></a>Running</h1>

<p>Run with <code>ryu-manager</code> (uses <code>/etc/ryu/faucet/faucet.yaml</code> as configuration by default):</p>

<pre><code>``# export FAUCET_CONFIG=/etc/ryu/faucet/faucet.yaml``

``# export GAUGE_CONFIG=/etc/ryu/faucet/gauge.conf``

``# export FAUCET_LOG_DIR=/var/log/ryu``

``# $EDITOR /etc/ryu/faucet/faucet.yaml``

``# ryu-manager --verbose faucet.py``
</code></pre>

<p>To find the location of <code>faucet.py</code>, run </p>

<p><code># pip show ryu-faucet</code> to get Location path.  Then run:</p>

<p><code># ryu-manager --verbose &lt;Location_Path&gt;/ryu_faucet/faucet.py</code></p>

<p>On MacOS X, for example, one would run this as:</p>

<p><code>#  ryu-manager --verbose /opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/ryu_faucet/faucet.py</code></p>

<p>To specify a different configuration file set the <code>FAUCET_CONFIG</code> environment variable.</p>

<p>Faucet will log to <code>/var/log/ryu/faucet/</code> by default, this can be changed with the <code>FAUCET_LOG_DIR</code> environment variable.</p>

<p>To tell Faucet to reload its configuration file after you've changed it, simply send it a <code>SIGHUP</code>:</p>

<p><code># pkill -SIGHUP -f "ryu-manager faucet.py"</code></p>

<h1></h1>

<h1>
<a id="testing" class="anchor" href="#testing" aria-hidden="true"><span class="octicon octicon-link"></span></a>Testing</h1>

<p>Faucet has been tested against:</p>

<pre><code>1. Open vSwitch v2.1+
2. Allied Telesis x510
</code></pre>

<p>On the Allied Telesis all vlans must be included in the vlan database config on the switch before they can be used by Openflow.</p>

<h2>
<a id="running-with-another-controller" class="anchor" href="#running-with-another-controller" aria-hidden="true"><span class="octicon octicon-link"></span></a>Running with another controller</h2>

<p>It is possible to use Faucet to add layer 2 features to another OpenFlow controller by running Faucet in parallel with that controller. Faucet will only ever modify/remove OpenFlow rules added by itself (identified by a special OpenFlow cookie unique to Faucet), this means the rules installed by the other controller/application will be left untouched.</p>

<p>Simply add Faucet as a second primary OpenFlow controller to your datapath element. You will also probably need to tweak the OpenFlow priority values Faucet uses by modifying <code>priority_offset</code> in the configuration file so that rules installed by the other controller don't override those installed by Faucet.</p>

<h1></h1>

<h1>
<a id="gauge" class="anchor" href="#gauge" aria-hidden="true"><span class="octicon octicon-link"></span></a>Gauge</h1>

<p>Gauge is the monitoring application. It polls each port for statistics and periodically dumps the flow table for statistics.</p>

<p>Gauge reads the faucet yaml configuration files of the datapaths it monitors. Which datapaths to monitor is provided in a configuration file containing a list of faucet yaml files, one per line.</p>

<p>The list of faucet yaml config is by default read from <code>/etc/ryu/faucet/gauge.conf</code>. This can be set with the <code>GAUGE_CONFIG</code> environment variable. Exceptions are logged to the same file as faucet's exceptions.</p>

<p>Gauge is run with <code>ryu-manager</code>:</p>

<p><code>$ $EDITOR /etc/ryu/faucet/gauge.conf</code></p>

<p><code>$ ryu-manager gauge.py</code></p>

<h1></h1>

<h1>
<a id="support" class="anchor" href="#support" aria-hidden="true"><span class="octicon octicon-link"></span></a>Support</h1>

<p>Mailing list info goes here</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/openflowsdn/faucet">Faucet</a> is maintained by <a href="https://github.com/openflowsdn">openflowsdn</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
